<header class="bg-white border-b border-gray-200 sticky top-0 z-50">
  <div class="container mx-auto px-6">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a routerLink="/" class="flex items-center gap-2 no-underline transition-opacity duration-200 hover:opacity-80">
          <i class="bi bi-lightning-charge-fill text-2xl text-blue-600"></i>
          <span class="text-xl font-bold text-gray-900">Electricity Business</span>
        </a>
      </div>
      
      <!-- Navigation Desktop -->
      <nav class="hidden lg:flex items-center gap-1">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" 
           class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100 hover:text-gray-900"
           [class.bg-blue-50]="router.url === '/' && !router.url.includes('?')"
           [class.text-blue-600]="router.url === '/' && !router.url.includes('?')"
           [class.font-semibold]="router.url === '/' && !router.url.includes('?')">
          <i class="bi bi-house-fill"></i>
          <span>Accueil</span>
        </a>
        
        <!-- Liens pour utilisateurs non connectés -->
        <ng-container *ngIf="!currentUser">
          <a routerLink="/auth/login" routerLinkActive="active" 
             class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100 hover:text-gray-900"
             [class.bg-blue-50]="router.url === '/auth/login'"
             [class.text-blue-600]="router.url === '/auth/login'"
             [class.font-semibold]="router.url === '/auth/login'">
            <i class="bi bi-box-arrow-in-right"></i>
            <span>Connexion</span>
          </a>
          <a routerLink="/auth/register" routerLinkActive="active" 
             class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold text-white bg-blue-600 transition-colors duration-200 hover:bg-blue-700 ml-2">
            <i class="bi bi-person-plus-fill"></i>
            <span>Inscription</span>
          </a>
        </ng-container>
        
        <!-- Liens pour utilisateurs connectés -->
        <ng-container *ngIf="currentUser">
          <a routerLink="/client/recherche" routerLinkActive="active"
             class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100 hover:text-gray-900"
             [class.bg-blue-50]="router.url.includes('/client/recherche')"
             [class.text-blue-600]="router.url.includes('/client/recherche')"
             [class.font-semibold]="router.url.includes('/client/recherche')">
            <i class="bi bi-search"></i>
            <span>Rechercher</span>
          </a>
          
          <a routerLink="/client/mes-reservations" routerLinkActive="active"
             class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100 hover:text-gray-900"
             [class.bg-blue-50]="router.url.includes('/client/mes-reservations')"
             [class.text-blue-600]="router.url.includes('/client/mes-reservations')"
             [class.font-semibold]="router.url.includes('/client/mes-reservations')">
            <i class="bi bi-calendar-check-fill"></i>
            <span>Mes réservations</span>
          </a>
          
          <!-- Liens propriétaire -->
          <a *ngIf="isProprietaire" routerLink="/proprietaire/mes-bornes" routerLinkActive="active"
             class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold text-white bg-orange-600 transition-colors duration-200 hover:bg-orange-700 ml-2"
             [class.bg-orange-700]="router.url.includes('/proprietaire/mes-bornes')">
            <i class="bi bi-lightning-charge-fill"></i>
            <span>Mes bornes</span>
          </a>
          
          <a *ngIf="isProprietaire" routerLink="/proprietaire/demandes" routerLinkActive="active"
             class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold text-white bg-orange-600 transition-colors duration-200 hover:bg-orange-700"
             [class.bg-orange-700]="router.url.includes('/proprietaire/demandes')">
            <i class="bi bi-inbox-fill"></i>
            <span>Demandes</span>
          </a>
          
          <!-- Menu utilisateur -->
          <div class="relative ml-2">
            <button 
              class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100 hover:text-gray-900"
              (click)="toggleDropdown($event)">
              <i class="bi bi-person-circle text-lg"></i>
              <span>{{ currentUser.prenom }}</span>
              <i class="bi bi-chevron-down text-xs transition-transform duration-200" [class.rotate-180]="isDropdownOpen"></i>
            </button>
            
            <!-- Dropdown menu -->
            <div *ngIf="isDropdownOpen" class="absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 animate-slideDown">
              <!-- User info -->
              <div class="px-4 py-3 border-b border-gray-200">
                <p class="text-sm font-semibold text-gray-900">{{ currentUser.prenom }} {{ currentUser.nom }}</p>
                <p class="text-xs text-gray-600">{{ currentUser.email }}</p>
              </div>
              
              <!-- Menu items -->
              <a routerLink="/dashboard" (click)="closeDropdown()"
                 class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                <i class="bi bi-speedometer2 text-blue-600"></i>
                <span>Tableau de bord</span>
              </a>
              
              <a routerLink="/profile" (click)="closeDropdown()"
                 class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                <i class="bi bi-person-fill text-blue-600"></i>
                <span>Mon profil</span>
              </a>
              
              <a routerLink="/client/lieux" (click)="closeDropdown()"
                 class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                <i class="bi bi-geo-alt-fill text-blue-600"></i>
                <span>Explorer les lieux</span>
              </a>
              
              <!-- Section propriétaire -->
              <ng-container *ngIf="isProprietaire">
                <div class="border-t border-gray-200 my-2"></div>
                <div class="px-4 py-2">
                  <p class="text-xs font-semibold text-gray-500 uppercase">Espace Propriétaire</p>
                </div>
                
                <a routerLink="/proprietaire/dashboard" (click)="closeDropdown()"
                   class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                  <i class="bi bi-speedometer text-orange-600"></i>
                  <span>Dashboard propriétaire</span>
                </a>
                
                <a routerLink="/proprietaire/mes-bornes" (click)="closeDropdown()"
                   class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                  <i class="bi bi-lightning-charge-fill text-orange-600"></i>
                  <span>Gérer mes bornes</span>
                </a>
                
                <a routerLink="/proprietaire/demandes" (click)="closeDropdown()"
                   class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                  <i class="bi bi-inbox-fill text-orange-600"></i>
                  <span>Demandes reçues</span>
                </a>
                
                <a routerLink="/proprietaire/historique" (click)="closeDropdown()"
                   class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                  <i class="bi bi-clock-history text-orange-600"></i>
                  <span>Historique</span>
                </a>
              </ng-container>
              
              <!-- Admin -->
              <a *ngIf="currentUser.role === 'admin'" routerLink="/admin" (click)="closeDropdown()"
                 class="flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                <i class="bi bi-shield-fill-check text-blue-600"></i>
                <span>Administration</span>
              </a>
              
              <!-- Logout -->
              <div class="border-t border-gray-200 my-2"></div>
              <button (click)="logout()" 
                 class="flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200 w-full text-left">
                <i class="bi bi-box-arrow-right"></i>
                <span>Déconnexion</span>
              </button>
            </div>
          </div>
        </ng-container>
      </nav>
      
      <!-- Bouton menu mobile -->
      <button class="lg:hidden p-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200" 
              (click)="toggleMenu()" 
              aria-label="Toggle menu">
        <svg *ngIf="!isMenuOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <svg *ngIf="isMenuOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    
    <!-- Menu mobile -->
    <nav *ngIf="isMenuOpen" class="lg:hidden py-4 border-t border-gray-200 animate-slideDown">
      <div class="space-y-1">
        <a routerLink="/" (click)="closeDropdown()"
           class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100"
           [class.bg-blue-50]="router.url === '/' && !router.url.includes('?')"
           [class.text-blue-600]="router.url === '/' && !router.url.includes('?')">
          <i class="bi bi-house-fill"></i>
          <span>Accueil</span>
        </a>
        
        <!-- Mobile - Non connecté -->
        <ng-container *ngIf="!currentUser">
          <a routerLink="/auth/login" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100"
             [class.bg-blue-50]="router.url === '/auth/login'"
             [class.text-blue-600]="router.url === '/auth/login'">
            <i class="bi bi-box-arrow-in-right"></i>
            <span>Connexion</span>
          </a>
          <a routerLink="/auth/register" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-semibold text-white bg-blue-600 transition-colors duration-200 hover:bg-blue-700">
            <i class="bi bi-person-plus-fill"></i>
            <span>Inscription</span>
          </a>
        </ng-container>
        
        <!-- Mobile - Connecté -->
        <ng-container *ngIf="currentUser">
          <div class="px-4 py-3 bg-gray-50 rounded-lg mb-2">
            <p class="text-sm font-semibold text-gray-900">{{ currentUser.prenom }} {{ currentUser.nom }}</p>
            <p class="text-xs text-gray-600">{{ currentUser.email }}</p>
          </div>
          
          <a routerLink="/client/recherche" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100"
             [class.bg-blue-50]="router.url.includes('/client/recherche')"
             [class.text-blue-600]="router.url.includes('/client/recherche')">
            <i class="bi bi-search"></i>
            <span>Rechercher</span>
          </a>
          
          <a routerLink="/client/mes-reservations" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100"
             [class.bg-blue-50]="router.url.includes('/client/mes-reservations')"
             [class.text-blue-600]="router.url.includes('/client/mes-reservations')">
            <i class="bi bi-calendar-check-fill"></i>
            <span>Mes réservations</span>
          </a>
          
          <a routerLink="/dashboard" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
            <i class="bi bi-speedometer2"></i>
            <span>Tableau de bord</span>
          </a>
          
          <a routerLink="/profile" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
            <i class="bi bi-person-fill"></i>
            <span>Mon profil</span>
          </a>
          
          <a routerLink="/client/lieux" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
            <i class="bi bi-geo-alt-fill"></i>
            <span>Explorer les lieux</span>
          </a>
          
          <!-- Mobile - Propriétaire -->
          <ng-container *ngIf="isProprietaire">
            <div class="border-t border-gray-200 my-2"></div>
            <div class="px-4 py-2">
              <p class="text-xs font-semibold text-gray-500 uppercase">Espace Propriétaire</p>
            </div>
            
            <a routerLink="/proprietaire/dashboard" (click)="closeDropdown()"
               class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
              <i class="bi bi-speedometer"></i>
              <span>Dashboard propriétaire</span>
            </a>
            
            <a routerLink="/proprietaire/mes-bornes" (click)="closeDropdown()"
               class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
              <i class="bi bi-lightning-charge-fill"></i>
              <span>Gérer mes bornes</span>
            </a>
            
            <a routerLink="/proprietaire/demandes" (click)="closeDropdown()"
               class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
              <i class="bi bi-inbox-fill"></i>
              <span>Demandes reçues</span>
            </a>
            
            <a routerLink="/proprietaire/historique" (click)="closeDropdown()"
               class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
              <i class="bi bi-clock-history"></i>
              <span>Historique</span>
            </a>
          </ng-container>
          
          <!-- Mobile - Admin -->
          <a *ngIf="currentUser.role === 'admin'" routerLink="/admin" (click)="closeDropdown()"
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-100">
            <i class="bi bi-shield-fill-check"></i>
            <span>Administration</span>
          </a>
          
          <!-- Mobile - Logout -->
          <div class="border-t border-gray-200 my-2"></div>
          <button (click)="logout()" 
             class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 transition-colors duration-200 w-full text-left">
            <i class="bi bi-box-arrow-right"></i>
            <span>Déconnexion</span>
          </button>
        </ng-container>
      </div>
    </nav>
  </div>
</header> 