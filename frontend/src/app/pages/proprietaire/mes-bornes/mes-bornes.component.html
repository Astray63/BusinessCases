<div class="max-w-7xl mx-auto p-4 md:p-6">
  <!-- Header -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">Mes Bornes de Recharge</h1>
      <p class="text-gray-600">Gérez vos bornes électriques et mettez-les en location</p>
    </div>
    <div class="flex gap-3">
      <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
        routerLink="/proprietaire">
        ← Retour au dashboard
      </button>
      <button
        class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2"
        (click)="ouvrirModalAjout()">
        <i class="bi bi-plus-lg"></i>
        Ajouter une borne
      </button>
    </div>
  </div>

  <!-- Loading -->
  @if (isLoading && !showModal) {
  <div class="flex flex-col items-center justify-center py-20">
    <div class="w-12 h-12 border-4 border-orange-600 border-t-transparent rounded-full animate-spin mb-4"></div>
    <p class="text-gray-600">Chargement de vos bornes...</p>
  </div>
  }

  <!-- Empty State - Nouveau propriétaire -->
  @if (!isLoading && mesBornes.length === 0) {
  <div class="bg-white border border-gray-200 rounded-lg p-8 md:p-12 text-center">
    <div class="flex justify-center mb-6">
      <div class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center">
        <i class="bi bi-lightning-charge-fill text-4xl text-orange-600"></i>
      </div>
    </div>
    <h2 class="text-2xl font-bold text-gray-900 mb-3">Bienvenue dans l'espace propriétaire !</h2>
    <p class="text-gray-600 mb-2 max-w-2xl mx-auto">
      Vous n'avez pas encore de borne enregistrée. Commencez par ajouter votre première borne de recharge pour la mettre
      en location.
    </p>
    <p class="text-gray-600 mb-6 max-w-2xl mx-auto">
      C'est simple : définissez l'emplacement, la puissance et le tarif, puis commencez à gagner de l'argent en louant
      votre borne aux utilisateurs !
    </p>

    <!-- Avantages -->
    <div class="grid md:grid-cols-3 gap-4 max-w-4xl mx-auto mb-8">
      <div class="p-4 bg-gray-50 rounded-lg">
        <i class="bi bi-cash-coin text-2xl text-orange-600 mb-2"></i>
        <h3 class="font-semibold text-gray-900 mb-1">Revenus passifs</h3>
        <p class="text-sm text-gray-600">Louez votre borne quand vous ne l'utilisez pas</p>
      </div>
      <div class="p-4 bg-gray-50 rounded-lg">
        <i class="bi bi-calendar-check text-2xl text-orange-600 mb-2"></i>
        <h3 class="font-semibold text-gray-900 mb-1">Gestion simple</h3>
        <p class="text-sm text-gray-600">Gérez les réservations en quelques clics</p>
      </div>
      <div class="p-4 bg-gray-50 rounded-lg">
        <i class="bi bi-shield-check text-2xl text-orange-600 mb-2"></i>
        <h3 class="font-semibold text-gray-900 mb-1">Paiements sécurisés</h3>
        <p class="text-sm text-gray-600">Recevez vos paiements de manière sécurisée</p>
      </div>
    </div>

    <button
      class="px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-lg font-semibold inline-flex items-center gap-2"
      (click)="ouvrirModalAjout()">
      <i class="bi bi-plus-lg"></i>
      Ajouter ma première borne
    </button>
  </div>
  }

  <!-- Bornes Grid -->
  @if (!isLoading && mesBornes.length > 0) {
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    @for (borne of mesBornes; track borne.idBorne) {
    <div class="bg-white border border-gray-200 rounded-lg hover:shadow-lg transition-shadow overflow-hidden">
      <!-- Image de la borne -->
      @if (borne.medias && borne.medias.length > 0) {
      <div class="h-48 overflow-hidden bg-gray-100">
        <img [src]="borne.medias[0]" alt="Photo de la borne" class="w-full h-full object-cover">
      </div>
      }
      @if (!borne.medias || borne.medias.length === 0) {
      <div class="h-48 bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center">
        <i class="bi bi-lightning-charge-fill text-6xl text-orange-600 opacity-50"></i>
      </div>
      }

      <!-- Header -->
      <div class="p-4 border-b border-gray-200">
        <div class="flex justify-between items-start mb-2">
          <h3 class="text-lg font-semibold text-gray-900">{{ borne.localisation }}</h3>
          <span class="px-2.5 py-0.5 text-xs font-medium rounded-full" [ngClass]="{
                  'bg-green-100 text-green-800': borne.etat === 'DISPONIBLE',
                  'bg-yellow-100 text-yellow-800': borne.etat === 'MAINTENANCE',
                  'bg-red-100 text-red-800': borne.etat === 'HORS_SERVICE'
                }">
            {{ getEtatLabel(borne.etat) }}
          </span>
        </div>
        @if (borne.medias && borne.medias.length > 1) {
        <div class="flex gap-1 items-center text-xs text-gray-500">
          <i class="bi bi-camera"></i>
          <span>{{ borne.medias.length }} photo(s)</span>
        </div>
        }
      </div>

      <!-- Body -->
      <div class="p-4 space-y-3">
        <div class="flex justify-between">
          <span class="text-sm text-gray-600">Type de prise</span>
          <span class="text-sm font-medium text-gray-900">{{ borne.type }}</span>
        </div>

        <div class="flex justify-between">
          <span class="text-sm text-gray-600">Puissance</span>
          <span class="text-sm font-medium text-gray-900">{{ borne.puissance }} kW</span>
        </div>

        <div class="flex justify-between">
          <span class="text-sm text-gray-600">Tarif</span>
          <span class="text-sm font-medium text-gray-900">{{ borne.prix | currency:'EUR':'symbol':'1.2-2' }}/h</span>
        </div>

        @if (borne.numero) {
        <div class="flex justify-between">
          <span class="text-sm text-gray-600">Numéro</span>
          <span class="text-sm font-medium text-gray-900">{{ borne.numero }}</span>
        </div>
        }
      </div>

      <!-- Actions -->
      <div class="p-4 border-t border-gray-200 flex gap-2">
        <button
          class="flex-1 px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm flex items-center justify-center gap-2"
          (click)="ouvrirModalModification(borne)" title="Modifier">
          <i class="bi bi-pencil"></i>
          Modifier
        </button>

        <button
          class="px-3 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm"
          (click)="supprimerBorne(borne.idBorne!)" title="Supprimer">
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
    }
  </div>
  }

  <!-- Modal Ajout/Modification -->
  @if (showModal) {
  <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" (click)="fermerModal()">
    <div class="bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl"
      (click)="$event.stopPropagation()">
      <!-- Header -->
      <div
        class="flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-orange-100">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-orange-600 rounded-lg flex items-center justify-center">
            <i class="bi bi-lightning-charge-fill text-white text-xl"></i>
          </div>
          <div>
            <h2 class="text-lg sm:text-xl font-bold text-gray-900">{{ isEditMode ? 'Modifier la borne' : 'Ajouter une
              nouvelle borne' }}</h2>
            <p class="text-xs sm:text-sm text-gray-600 hidden sm:block">{{ isEditMode ? 'Mettez à jour les informations
              de votre borne' : 'Créez une nouvelle borne de recharge' }}</p>
          </div>
        </div>
        <button
          class="text-gray-400 hover:text-gray-600 text-3xl leading-none p-1 hover:bg-gray-100 rounded-lg transition-colors"
          (click)="fermerModal()">×</button>
      </div>

      <!-- Form -->
      <form [formGroup]="borneForm" (ngSubmit)="soumettreBorne()" class="overflow-y-auto max-h-[calc(90vh-160px)]">
        <div class="p-4 sm:p-6 space-y-5">

          <!-- Section Info -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4">
            <div class="flex gap-3">
              <i class="bi bi-info-circle text-blue-600 text-lg flex-shrink-0"></i>
              <div>
                <p class="text-xs sm:text-sm text-blue-900 font-medium mb-1">Informations importantes</p>
                <p class="text-xs text-blue-800">Remplissez tous les champs pour ajouter votre borne. Assurez-vous que
                  les informations sont exactes pour attirer plus de clients.</p>
              </div>
            </div>
          </div>

          <!-- Lieu -->
          <div>
            <label for="lieu" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-geo-alt text-orange-600"></i>
              Lieu *
            </label>

            <!-- Alerte si aucun lieu -->
            @if (mesLieux.length === 0) {
            <div class="mb-3 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
              <div class="flex items-start gap-3">
                <i class="bi bi-exclamation-triangle text-yellow-600 text-xl flex-shrink-0"></i>
                <div class="flex-1">
                  <p class="text-sm font-semibold text-yellow-900 mb-2">Vous n'avez pas encore de lieu enregistré</p>
                  <p class="text-xs text-yellow-800 mb-3">Pour créer une borne, vous devez d'abord créer un lieu de
                    recharge (l'adresse où se trouve la borne).</p>
                  <button type="button"
                    class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm font-semibold flex items-center gap-2"
                    (click)="ajouterLieu()">
                    <i class="bi bi-plus-lg"></i>
                    Créer mon premier lieu
                  </button>
                </div>
              </div>
            </div>
            }

            <div class="flex flex-col sm:flex-row gap-2">
              <select id="lieu" formControlName="lieu"
                class="flex-1 px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"
                [disabled]="mesLieux.length === 0">
                <option value="">-- Sélectionnez un lieu --</option>
                @for (lieu of mesLieux; track lieu.idLieu) {
                <option [value]="lieu.idLieu">
                  {{ lieu.nom }} - {{ lieu.ville }}
                </option>
                }
              </select>
              <button type="button"
                class="px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap text-sm font-medium flex items-center justify-center gap-2 sm:w-auto"
                (click)="ajouterLieu()">
                <i class="bi bi-plus-lg"></i>
                <span class="hidden sm:inline">Nouveau lieu</span>
              </button>
            </div>
            <p class="mt-1.5 text-xs text-gray-500 flex items-start gap-1">
              <i class="bi bi-lightbulb text-yellow-500 flex-shrink-0 mt-0.5"></i>
              <span>Choisissez l'adresse principale où se trouve la borne (maison, entreprise, parking, etc.)</span>
            </p>
          </div>

          <!-- Localisation -->
          <div>
            <label for="localisation" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-pin-map text-orange-600"></i>
              Description de l'emplacement *
            </label>
            <input type="text" id="localisation" formControlName="localisation"
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"
              placeholder="Ex: Parking extérieur place n°12, Garage niveau -1, Devant le portail">
            <p class="mt-1.5 text-xs text-gray-500 flex items-start gap-1">
              <i class="bi bi-lightbulb text-yellow-500 flex-shrink-0 mt-0.5"></i>
              <span>Décrivez précisément où se trouve la borne dans le lieu (utile pour les utilisateurs)</span>
            </p>
          </div>

          <!-- Nom -->
          <div>
            <label for="nom" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-tag text-orange-600"></i>
              Nom de la borne *
            </label>
            <input type="text" id="nom" formControlName="nom"
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"
              placeholder="Ex: Borne 3, Borne principale, Borne parking">
            <p class="mt-1.5 text-xs text-gray-500">Nom pour identifier facilement cette borne</p>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5">
            <!-- Type de prise - FIXE à 2S -->
            <div>
              <label class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-plug text-orange-600"></i>
                Type de connecteur
              </label>
              <div
                class="w-full px-3 py-2.5 border border-gray-200 bg-gray-50 rounded-lg text-sm text-gray-700 font-medium">
                Type 2S (Standard)
              </div>
              <p class="mt-1.5 text-xs text-gray-500">Toutes les bornes utilisent exclusivement le connecteur Type 2S
              </p>
            </div>

            <!-- Puissance -->
            <div>
              <label for="puissance" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-lightning text-orange-600"></i>
                Puissance *
              </label>
              <select id="puissance" formControlName="puissance"
                class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm">
                <option value="">-- Sélectionnez --</option>
                <option value="3.7">3,7 kVA</option>
                <option value="7.4">7,4 kVA</option>
                <option value="11">11 kVA</option>
                <option value="22">22 kVA</option>
                <option value="50">50 kVA</option>
                <option value="100">100 kVA</option>
                <option value="150">150 kVA</option>
                <option value="350">350 kVA</option>
              </select>
              <p class="mt-1.5 text-xs text-gray-500">Puissance max de charge</p>
            </div>
          </div>

          <!-- Ville -->
          <div>
            <label for="ville" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-building text-orange-600"></i>
              Ville *
            </label>
            <input type="text" id="ville" formControlName="ville"
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"
              placeholder="Ex: Paris, Lyon, Marseille">
            <p class="mt-1.5 text-xs text-gray-500">Ville où se trouve la borne</p>
          </div>

          <!-- Coordonnées GPS -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5">
            <!-- Latitude -->
            <div>
              <label for="latitude" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-geo text-orange-600"></i>
                Latitude *
              </label>
              <input type="number" id="latitude" formControlName="latitude"
                class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"
                placeholder="Ex: 48.856614" step="0.000001">
              <p class="mt-1.5 text-xs text-gray-500">Coordonnée latitude</p>
            </div>

            <!-- Longitude -->
            <div>
              <label for="longitude" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-geo-alt text-orange-600"></i>
                Longitude *
              </label>
              <input type="number" id="longitude" formControlName="longitude"
                class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"
                placeholder="Ex: 2.352222" step="0.000001">
              <p class="mt-1.5 text-xs text-gray-500">Coordonnée longitude</p>
            </div>
          </div>

          <!-- Bouton utiliser ma position -->
          <div>
            <button type="button"
              class="px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold flex items-center gap-2"
              (click)="utiliserMaPosition()">
              <i class="bi bi-crosshair"></i>
              Utiliser ma position
            </button>
          </div>

          <!-- Instruction -->
          <div>
            <label for="instruction" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-file-text text-orange-600"></i>
              Instructions d'accès
            </label>
            <textarea id="instruction" formControlName="instruction" rows="4"
              class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm resize-none"
              placeholder="Ex: Tournez à droite dès que vous avez passé le portail d'entrée.&#10;La borne se situé à 20 mètres de distance par rapport au portail d'entrée."></textarea>
            <p class="mt-1.5 text-xs text-gray-500">Indiquez comment accéder à la borne (facultatif)</p>
          </div>

          <!-- Sur pied -->
          <div class="flex items-center gap-3">
            <input type="checkbox" id="surPied" formControlName="surPied"
              class="w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500">
            <label for="surPied" class="text-sm font-medium text-gray-700 cursor-pointer">
              Sur pied
            </label>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5">
            <!-- Prix -->
            <div>
              <label for="prix" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-currency-euro text-orange-600"></i>
                Tarif horaire (€) *
              </label>
              <div class="relative">
                <input type="number" id="prix" formControlName="prix"
                  class="w-full px-3 py-2.5 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"
                  placeholder="5.50" min="0" step="0.01">
                <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium">€/h</span>
              </div>
              <p class="mt-1.5 text-xs text-gray-500">Prix par heure de charge</p>
            </div>

            <!-- État -->
            <div>
              <label for="etat" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-toggle-on text-orange-600"></i>
                État de la borne *
              </label>
              <select id="etat" formControlName="etat"
                class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm">
                <option value="DISPONIBLE">Disponible</option>
                <option value="MAINTENANCE">En maintenance</option>
                <option value="HORS_SERVICE">Hors service</option>
              </select>
              <p class="mt-1.5 text-xs text-gray-500">Statut actuel</p>
            </div>
          </div>

          <!-- Prix indicatif -->
          @if (borneForm.get('prix')?.value > 0) {
          <div class="bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4">
            <div class="flex items-start gap-3">
              <i class="bi bi-cash-coin text-green-600 text-xl flex-shrink-0"></i>
              <div class="flex-1">
                <p class="text-xs sm:text-sm font-semibold text-green-900 mb-1">Revenus potentiels</p>
                <div class="space-y-1 text-xs text-green-800">
                  <div class="flex justify-between">
                    <span>1 heure de charge :</span>
                    <span class="font-semibold">{{ borneForm.get('prix')?.value | currency:'EUR':'symbol':'1.2-2'
                      }}</span>
                  </div>
                  <div class="flex justify-between">
                    <span>4 heures (moyenne) :</span>
                    <span class="font-semibold">{{ borneForm.get('prix')?.value * 4 | currency:'EUR':'symbol':'1.2-2'
                      }}</span>
                  </div>
                  <div class="flex justify-between border-t border-green-300 pt-1 mt-1">
                    <span>Par jour (2 charges) :</span>
                    <span class="font-bold text-sm">{{ borneForm.get('prix')?.value * 8 |
                      currency:'EUR':'symbol':'1.2-2' }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          }

          <!-- Photos de la borne -->
          <div>
            <label class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-camera text-orange-600"></i>
              Photos de la borne
            </label>

            <!-- Photos existantes -->
            @if (existingPhotos.length > 0) {
            <div class="mb-3">
              <p class="text-xs text-gray-600 mb-2">Photos actuelles :</p>
              <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                @for (photo of existingPhotos; track i; let i = $index) {
                <div class="relative group">
                  <img [src]="photo" alt="Photo de la borne"
                    class="w-full h-24 object-cover rounded-lg border border-gray-300">
                  <button type="button" (click)="removeExistingPhoto(i)"
                    class="absolute top-1 right-1 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-xs">
                    <i class="bi bi-x-lg"></i>
                  </button>
                </div>
                }
              </div>
            </div>
            }

            <!-- Nouvelles photos -->
            @if (previewUrls.length > 0) {
            <div class="mb-3">
              <p class="text-xs text-gray-600 mb-2">Nouvelles photos à ajouter :</p>
              <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                @for (preview of previewUrls; track i; let i = $index) {
                <div class="relative group">
                  <img [src]="preview" alt="Aperçu" class="w-full h-24 object-cover rounded-lg border border-gray-300">
                  <button type="button" (click)="removeNewPhoto(i)"
                    class="absolute top-1 right-1 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-xs">
                    <i class="bi bi-x-lg"></i>
                  </button>
                </div>
                }
              </div>
            </div>
            }

            <!-- Bouton d'upload -->
            <div
              class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-orange-500 transition-colors">
              <input type="file" id="photos" class="hidden" accept="image/*" multiple (change)="onFileSelected($event)">
              <label for="photos" class="cursor-pointer">
                <div class="flex flex-col items-center gap-2">
                  <i class="bi bi-cloud-upload text-3xl text-gray-400"></i>
                  <p class="text-sm font-medium text-gray-700">Cliquez pour ajouter des photos</p>
                  <p class="text-xs text-gray-500">Maximum 5 photos (JPG, PNG) - 5MB par image</p>
                  <p class="text-xs text-orange-600 font-medium">
                    {{ existingPhotos.length + selectedFiles.length }} / 5 photos
                  </p>
                </div>
              </label>
            </div>

            <p class="mt-2 text-xs text-gray-500 flex items-start gap-1">
              <i class="bi bi-lightbulb text-yellow-500 flex-shrink-0 mt-0.5"></i>
              <span>Ajoutez des photos de qualité pour attirer plus de clients. Montrez la borne, le parking et
                l'accès.</span>
            </p>
          </div>

        </div>

        <!-- Footer -->
        <div class="flex flex-col-reverse sm:flex-row gap-3 p-4 sm:p-6 border-t border-gray-200 bg-gray-50">
          <button type="button"
            class="w-full sm:flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm"
            (click)="fermerModal()" [disabled]="isLoading">
            Annuler
          </button>
          <button type="submit"
            class="w-full sm:flex-1 px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed font-semibold text-sm flex items-center justify-center gap-2"
            [disabled]="borneForm.invalid || isLoading">
            <i class="bi" [ngClass]="isEditMode ? 'bi-check-circle' : 'bi-plus-circle'"></i>
            @if (!isLoading) {
            <span>{{ isEditMode ? 'Enregistrer les modifications' : 'Créer la borne' }}</span>
            }
            @if (isLoading) {
            <span class="flex items-center gap-2">
              <span class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
              En cours...
            </span>
            }
          </button>
        </div>
      </form>
    </div>
  </div>
  }
</div>