<div class="min-h-screen bg-gray-50 flex items-center justify-center px-4 py-8 sm:px-6 lg:px-8">
  <div class="w-full max-w-2xl">
    <!-- Card -->
    <div class="bg-white rounded-xl sm:rounded-2xl shadow-xl overflow-hidden">
      <!-- Header avec gradient -->
      <div class="relative bg-gradient-to-br from-blue-600 to-blue-800 px-6 py-8 sm:px-8 sm:py-10 text-center overflow-hidden">
        <div class="absolute inset-0 bg-black/20"></div>
        <div class="relative z-10">
          <div class="w-14 h-14 sm:w-16 sm:h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg">
            <i class="bi bi-person-plus-fill text-2xl sm:text-3xl text-blue-700"></i>
          </div>
          <h1 class="text-2xl sm:text-3xl font-bold text-white mb-2">Créer un compte</h1>
          <p class="text-sm sm:text-base text-blue-100">
            Rejoignez <span class="text-yellow-400 font-semibold">E-Charge</span> et commencez à recharger
          </p>
        </div>
      </div>

      <!-- Formulaire -->
      <div class="px-6 py-6 sm:px-8 sm:py-8">
        <!-- Message d'erreur -->
        <div *ngIf="errorMessage" class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3">
          <i class="bi bi-exclamation-triangle-fill text-red-600 text-lg flex-shrink-0 mt-0.5"></i>
          <div>
            <p class="text-sm font-semibold text-red-800 mb-1">Erreur d'inscription</p>
            <p class="text-sm text-red-700">{{ errorMessage }}</p>
          </div>
        </div>

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-5 sm:space-y-6">
          
          <!-- Nom et Prénom -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5">
            <!-- Nom -->
            <div>
              <label for="nom" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-person text-blue-700"></i>
                <span>Nom</span>
              </label>
              <input 
                type="text" 
                id="nom" 
                formControlName="nom"
                class="w-full px-4 py-2.5 sm:py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-sm sm:text-base text-gray-900 placeholder-gray-400"
                [ngClass]="{
                  'border-red-300 focus:ring-red-500': submitted && f['nom'].errors,
                  'border-gray-300': !(submitted && f['nom'].errors)
                }"
                placeholder="Votre nom">
              <div *ngIf="submitted && f['nom'].errors" class="mt-1.5">
                <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                  <i class="bi bi-exclamation-circle"></i>
                  <span *ngIf="f['nom'].errors['required']">Le nom est requis</span>
                </p>
              </div>
            </div>

            <!-- Prénom -->
            <div>
              <label for="prenom" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-person text-blue-700"></i>
                <span>Prénom</span>
              </label>
              <input 
                type="text" 
                id="prenom" 
                formControlName="prenom"
                class="w-full px-4 py-2.5 sm:py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-sm sm:text-base text-gray-900 placeholder-gray-400"
                [ngClass]="{
                  'border-red-300 focus:ring-red-500': submitted && f['prenom'].errors,
                  'border-gray-300': !(submitted && f['prenom'].errors)
                }"
                placeholder="Votre prénom">
              <div *ngIf="submitted && f['prenom'].errors" class="mt-1.5">
                <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                  <i class="bi bi-exclamation-circle"></i>
                  <span *ngIf="f['prenom'].errors['required']">Le prénom est requis</span>
                </p>
              </div>
            </div>
          </div>

          <!-- Pseudo -->
          <div>
            <label for="pseudo" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-at text-blue-700"></i>
              <span>Pseudo</span>
            </label>
            <input 
              type="text" 
              id="pseudo" 
              formControlName="pseudo"
              class="w-full px-4 py-2.5 sm:py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-sm sm:text-base text-gray-900 placeholder-gray-400"
              [ngClass]="{
                'border-red-300 focus:ring-red-500': submitted && f['pseudo'].errors,
                'border-gray-300': !(submitted && f['pseudo'].errors)
              }"
              placeholder="Choisissez un pseudo unique">
            <div *ngIf="submitted && f['pseudo'].errors" class="mt-1.5">
              <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                <i class="bi bi-exclamation-circle"></i>
                <span *ngIf="f['pseudo'].errors['required']">Le pseudo est requis</span>
              </p>
            </div>
          </div>

          <!-- Email et Date de naissance -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5">
            <!-- Email -->
            <div>
              <label for="email" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-envelope text-blue-700"></i>
                <span>Email</span>
              </label>
              <input 
                type="email" 
                id="email" 
                formControlName="email"
                class="w-full px-4 py-2.5 sm:py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-sm sm:text-base text-gray-900 placeholder-gray-400"
                [ngClass]="{
                  'border-red-300 focus:ring-red-500': submitted && f['email'].errors,
                  'border-gray-300': !(submitted && f['email'].errors)
                }"
                placeholder="votre@email.com">
              <div *ngIf="submitted && f['email'].errors" class="mt-1.5">
                <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                  <i class="bi bi-exclamation-circle"></i>
                  <span *ngIf="f['email'].errors['required']">L'email est requis</span>
                  <span *ngIf="f['email'].errors['email']">Email invalide</span>
                </p>
              </div>
            </div>

            <!-- Date de naissance -->
            <div>
              <label for="dateNaissance" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-calendar text-blue-700"></i>
                <span>Date de naissance</span>
              </label>
              <input 
                type="date" 
                id="dateNaissance" 
                formControlName="dateNaissance"
                class="w-full px-4 py-2.5 sm:py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-sm sm:text-base text-gray-900"
                [ngClass]="{
                  'border-red-300 focus:ring-red-500': submitted && f['dateNaissance'].errors,
                  'border-gray-300': !(submitted && f['dateNaissance'].errors)
                }">
              <div *ngIf="submitted && f['dateNaissance'].errors" class="mt-1.5">
                <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                  <i class="bi bi-exclamation-circle"></i>
                  <span *ngIf="f['dateNaissance'].errors['required']">La date de naissance est requise</span>
                </p>
              </div>
            </div>
          </div>

          <!-- Mot de passe et Confirmation -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5">
            <!-- Mot de passe -->
            <div>
              <label for="motDePasse" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-lock text-blue-700"></i>
                <span>Mot de passe</span>
              </label>
              <input 
                type="password" 
                id="motDePasse" 
                formControlName="motDePasse"
                class="w-full px-4 py-2.5 sm:py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-sm sm:text-base text-gray-900 placeholder-gray-400"
                [ngClass]="{
                  'border-red-300 focus:ring-red-500': submitted && f['motDePasse'].errors,
                  'border-gray-300': !(submitted && f['motDePasse'].errors)
                }"
                placeholder="Min. 6 caractères">
              <div *ngIf="submitted && f['motDePasse'].errors" class="mt-1.5">
                <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                  <i class="bi bi-exclamation-circle"></i>
                  <span *ngIf="f['motDePasse'].errors['required']">Le mot de passe est requis</span>
                  <span *ngIf="f['motDePasse'].errors['minlength']">Min. 6 caractères</span>
                </p>
              </div>
            </div>

            <!-- Confirmation mot de passe -->
            <div>
              <label for="confirmMotDePasse" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                <i class="bi bi-shield-check text-blue-700"></i>
                <span>Confirmer</span>
              </label>
              <input 
                type="password" 
                id="confirmMotDePasse" 
                formControlName="confirmMotDePasse"
                class="w-full px-4 py-2.5 sm:py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-all text-sm sm:text-base text-gray-900 placeholder-gray-400"
                [ngClass]="{
                  'border-red-300 focus:ring-red-500': submitted && f['confirmMotDePasse'].errors,
                  'border-gray-300': !(submitted && f['confirmMotDePasse'].errors)
                }"
                placeholder="Confirmer le mot de passe">
              <div *ngIf="submitted && f['confirmMotDePasse'].errors" class="mt-1.5">
                <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                  <i class="bi bi-exclamation-circle"></i>
                  <span *ngIf="f['confirmMotDePasse'].errors['required']">Confirmation requise</span>
                  <span *ngIf="f['confirmMotDePasse'].errors['mustMatch']">Mots de passe différents</span>
                </p>
              </div>
            </div>
          </div>

          <!-- Accepter les conditions -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <label class="flex items-start gap-3 cursor-pointer">
              <input 
                type="checkbox" 
                id="acceptTerms" 
                formControlName="acceptTerms"
                class="mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2">
              <span class="text-sm text-gray-700">
                J'accepte les 
                <a href="#" class="text-blue-700 font-semibold hover:text-blue-800 underline">conditions d'utilisation</a> 
                et la 
                <a href="#" class="text-blue-700 font-semibold hover:text-blue-800 underline">politique de confidentialité</a>
              </span>
            </label>
            <div *ngIf="submitted && f['acceptTerms'].errors" class="mt-2">
              <p class="text-xs sm:text-sm text-red-600 flex items-center gap-1">
                <i class="bi bi-exclamation-circle"></i>
                <span>Vous devez accepter les conditions</span>
              </p>
            </div>
          </div>
          
          <!-- Bouton d'inscription -->
          <button 
            type="submit" 
            class="w-full py-3 sm:py-3.5 px-4 bg-gradient-to-br from-blue-600 to-blue-800 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg hover:shadow-xl text-sm sm:text-base"
            [disabled]="loading">
            <span *ngIf="!loading" class="flex items-center gap-2">
              <i class="bi bi-person-plus text-base sm:text-lg"></i>
              <span>Créer mon compte</span>
            </span>
            <span *ngIf="loading" class="flex items-center gap-2">
              <span class="w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
              <span>Inscription...</span>
            </span>
          </button>

          <!-- Divider -->
          <div class="relative my-5 sm:my-6">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
            <div class="relative flex justify-center text-xs sm:text-sm">
              <span class="px-3 sm:px-4 bg-white text-gray-500 font-medium">Ou</span>
            </div>
          </div>

          <!-- Lien vers connexion -->
          <div class="text-center">
            <p class="text-sm sm:text-base text-gray-600 mb-3">Vous avez déjà un compte ?</p>
            <a 
              routerLink="/auth/login" 
              class="inline-flex items-center justify-center gap-2 px-5 py-2.5 sm:px-6 sm:py-3 border-2 border-blue-700 text-blue-700 font-semibold rounded-lg hover:bg-blue-50 transition-all duration-200 text-sm sm:text-base w-full sm:w-auto">
              <i class="bi bi-box-arrow-in-right text-base sm:text-lg"></i>
              <span>Se connecter</span>
            </a>
          </div>
        </form>
      </div>
    </div>

    <!-- Lien retour accueil -->
    <div class="text-center mt-4 sm:mt-6">
      <a 
        routerLink="/" 
        class="inline-flex items-center gap-2 text-sm sm:text-base text-gray-600 hover:text-gray-900 font-medium transition-colors">
        <i class="bi bi-arrow-left"></i>
        <span>Retour à l'accueil</span>
      </a>
    </div>
  </div>
</div>
